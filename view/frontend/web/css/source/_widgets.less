//
//  Review Widgets Styles - Luxury Minimalist Design
//  _____________________________________________
//
//  @category  Amadeco
//  @package   Amadeco_ReviewWidget
//  @author    Ilan Parmentier
//  @copyright Copyright (c) 2025 Amadeco
//
//  Design Philosophy:
//  - Generous whitespace for breathing room
//  - Subtle animations and micro-interactions
//  - Premium typography hierarchy
//  - Muted, sophisticated color palette
//  - Clean, border-minimal aesthetic
//

//
//  Design Tokens - Luxury Variables
//  ----------------------------------------------

@review-widget-luxury-spacing: @indent__m;
@review-widget-card-spacing: @indent__s;
@review-widget-inner-spacing: @indent__s;

// Premium color palette
@review-widget-luxury-bg: #fafafa;
@review-widget-luxury-card-bg: #ffffff;
@review-widget-luxury-border: #e8e8e8;
@review-widget-luxury-accent: #1a1a1a;
@review-widget-luxury-muted: #6b6b6b;
@review-widget-luxury-highlight: #f5f5f5;

// Typography scale
@review-widget-title-size: 28px;
@review-widget-subtitle-size: 18px;
@review-widget-body-size: 15px;
@review-widget-meta-size: 13px;

// Transitions
@review-widget-transition-fast: 200ms cubic-bezier(0.4, 0, 0.2, 1);
@review-widget-transition-smooth: 350ms cubic-bezier(0.4, 0, 0.2, 1);

// Shadows - layered and subtle
@review-widget-shadow-minimal: 0 1px 3px rgba(0, 0, 0, 0.04);
@review-widget-shadow-soft: 0 4px 12px rgba(0, 0, 0, 0.06);
@review-widget-shadow-elevated: 0 8px 24px rgba(0, 0, 0, 0.08);

//
//  Luxury Mixins
//  ----------------------------------------------

.luxury-card() {
    background: @review-widget-luxury-card-bg;
    border: 1px solid @review-widget-luxury-border;
    border-radius: 8px;
    box-shadow: @review-widget-shadow-minimal;
    transition: all @review-widget-transition-smooth;
}

.luxury-card-hover() {
    box-shadow: @review-widget-shadow-elevated;
    transform: translateY(-4px);
    border-color: darken(@review-widget-luxury-border, 5%);
}

.luxury-typography-title() {
    font-size: @review-widget-title-size;
    font-weight: 300;
    letter-spacing: -0.02em;
    line-height: 1.3;
    color: @review-widget-luxury-accent;
}

.luxury-typography-body() {
    font-size: @review-widget-body-size;
    font-weight: 400;
    line-height: 1.7;
    letter-spacing: 0.01em;
    color: @review-widget-luxury-accent;
}

.luxury-typography-meta() {
    font-size: @review-widget-meta-size;
    font-weight: 400;
    letter-spacing: 0.03em;
    text-transform: uppercase;
    color: @review-widget-luxury-muted;
}

//
//  Common Styles
//  ----------------------------------------------

& when (@media-common = true) {

    //
    // Badge Store Rating Widget - Luxury Edition
    // ___________________________________________

    .widget-badge-rating {
        .lib-css(margin, @review-widget-luxury-spacing 0);
        background: @review-widget-luxury-bg;
        .lib-css(padding, @review-widget-inner-spacing);
        border-radius: 12px;

        .block-content {
            padding: 0;
            border: none;
        }

        .rating-summary {
            .lib-css(margin-bottom, @review-widget-inner-spacing);
            display: flex;
            align-items: center;
            gap: 16px;

            .label {
                .luxury-typography-meta();
                margin: 0;

                > span {
                    display: inline-block;
                }
            }

            .rating-result {
                display: inline-flex;
                align-items: center;
                position: relative;

                // Enhanced star styling
                &::before {
                    content: '';
                    position: absolute;
                    left: -4px;
                    width: calc(100% + 8px);
                    height: 100%;
                    background: linear-gradient(90deg,
                        rgba(255, 215, 0, 0.1) 0%,
                        transparent 100%);
                    border-radius: 4px;
                    z-index: -1;
                }
            }
        }

        .reviews-actions {
            .rating-value {
                display: block;
                .lib-css(margin-bottom, 8px);
                .luxury-typography-body();
                font-weight: 300;
            }

            .review-count {
                display: block;
                .luxury-typography-meta();
            }
        }

        &.widget-badge-inline {
            display: inline-flex;
            align-items: center;
            gap: 24px;
            padding: 8px 16px;
            background: @review-widget-luxury-card-bg;
            border: 1px solid @review-widget-luxury-border;
            border-radius: 100px;
            box-shadow: @review-widget-shadow-minimal;

            .rating-summary {
                margin-bottom: 0;
            }

            .reviews-actions {
                display: flex;
                align-items: center;
                gap: 12px;

                .rating-value,
                .review-count {
                    display: inline;
                    margin: 0;
                }
            }
        }
    }

    //
    // Reviews List Widget - Common Luxury Styles
    // ___________________________________________

    .widget-reviews-list {
        .lib-css(margin-bottom, @review-widget-luxury-spacing * 2);
        .lib-css(padding, @review-widget-card-spacing);
        background: @review-widget-luxury-bg;
        border-radius: 16px;

        .block-title {
            .lib-css(margin-bottom, @review-widget-luxury-spacing);
            display: flex;
            justify-content: space-between;
            align-items: flex-start;
            gap: @review-widget-card-spacing;
            padding-bottom: @review-widget-inner-spacing;
            border-bottom: 1px solid @review-widget-luxury-border;

            .title {
                .luxury-typography-title();
                margin: 0;
                flex: 1 1 auto;
            }

            .title-badge {
                flex: 0 0 auto;
            }
        }

        .widget-badge-rating {
            margin-bottom: 0;
        }

        .review-title {
            .lib-css(margin-bottom, 12px);
            display: block;
            font-size: @review-widget-subtitle-size;
            font-weight: 400;
            letter-spacing: -0.01em;
            line-height: 1.4;
            color: @review-widget-luxury-accent;
        }

        .review-meta {
            .luxury-typography-meta();
            display: flex;
            align-items: center;
            gap: 16px;

            .review-author {
                margin: 0;
            }

            .review-date {
                &:before {
                    content: 'Â·';
                    margin: 0 8px 0 0;
                }
            }
        }

        .review-actions {
            .lib-css(margin-top, @review-widget-inner-spacing);
        }

        .reviews-items {
            list-style: none;
            padding: 0;
            margin: 0;
        }
    }

    .widget-reviews-grid {
        padding: 0 0 @review-widget-card-spacing 0;
    }

    //
    // Reviews Carousel - Luxury Slider
    // ___________________________________________

    .widget-reviews-carousel {

        .reviews-carousel-wrapper {
            position: relative;
            .lib-css(margin-top, @review-widget-card-spacing);
        }

        .review-item {
            .luxury-card();
            .lib-css(padding, @review-widget-card-spacing);
            margin: 8px; // Space for shadow

            &:hover {
                .luxury-card-hover();
            }
        }

        .review-header {
            .lib-css(margin-bottom, @review-widget-inner-spacing);
            padding-bottom: @review-widget-inner-spacing;
            border-bottom: 1px solid @review-widget-luxury-border;

            .rating-summary {
                .lib-css(margin-bottom, 12px);
            }
        }

        .review-body {
            .lib-css(margin, @review-widget-inner-spacing 0);

            .review-quote {
                .lib-css(padding-left, @review-widget-inner-spacing);
                margin: 0;
                border-left: 2px solid @review-widget-luxury-accent;
                font-style: normal;
                position: relative;

                // Subtle quote mark decoration
                &:before {
                    content: '"';
                    position: absolute;
                    left: -8px;
                    top: -12px;
                    font-size: 48px;
                    font-weight: 300;
                    color: @review-widget-luxury-border;
                    opacity: 0.5;
                    line-height: 1;
                }

                p {
                    .luxury-typography-body();
                    margin: 0;
                }

                .review-meta {
                    .lib-css(margin-top, @review-widget-inner-spacing);
                    font-style: normal;
                }
            }
        }

        .review-actions {
            .lib-css(margin-top, @review-widget-card-spacing);
            padding-top: @review-widget-inner-spacing;
            border-top: 1px solid @review-widget-luxury-border;
        }
    }

    //
    // Reviews Grid - Premium Cards Layout
    // ___________________________________________

    .widget-reviews-grid {

        .reviews-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(320px, 1fr));
            gap: @review-widget-card-spacing;
            .lib-css(margin-top, @review-widget-card-spacing);
        }

        .review-grid-item {
            display: flex;
        }

        .review-card {
            .luxury-card();
            width: 100%;
            overflow: hidden;

            &:hover {
                .luxury-card-hover();

                .review-card-content {
                    &:after {
                        opacity: 1;
                    }
                }
            }
        }

        .review-card-content {
            .lib-css(padding, @review-widget-card-spacing);
            display: flex;
            flex-direction: column;
            height: 100%;
            position: relative;

            // Subtle gradient overlay on hover
            &:after {
                content: '';
                position: absolute;
                top: 0;
                left: 0;
                right: 0;
                height: 4px;
                background: linear-gradient(90deg,
                    @review-widget-luxury-accent 0%,
                    transparent 100%);
                opacity: 0;
                transition: opacity @review-widget-transition-smooth;
            }
        }

        .rating-summary {
            .lib-css(margin-bottom, 16px);
        }

        .review-title {
            .lib-css(margin-bottom, 16px);
        }

        .review-content {
            .lib-css(margin, @review-widget-inner-spacing 0);
            flex: 1 1 auto;

            p {
                .luxury-typography-body();
                margin: 0;
                display: -webkit-box;
                -webkit-line-clamp: 5;
                -webkit-box-orient: vertical;
                overflow: hidden;
                text-overflow: ellipsis;
            }
        }

        .review-meta {
            .lib-css(padding-top, @review-widget-inner-spacing);
            .lib-css(margin-top, @review-widget-inner-spacing);
            margin-bottom: 0;
            border-top: 1px solid @review-widget-luxury-border;
            display: flex;
            justify-content: space-between;
            align-items: center;
            gap: 12px;

            .review-date:before {
                display: none;
            }
        }

        .review-actions {
            .lib-css(margin-top, @review-widget-inner-spacing);

            .action {
                width: 100%;
                display: block;
                text-align: center;
            }
        }
    }

    //
    // Reviews Vertical List - Editorial Style
    // ___________________________________________

    .widget-reviews-vertical {

        .review-item {
            .lib-css(padding, @review-widget-card-spacing 0);
            .lib-css(margin-bottom, @review-widget-card-spacing);
            border-bottom: 1px solid @review-widget-luxury-border;
            transition: all @review-widget-transition-smooth;

            &:last-child {
                border-bottom: none;
                margin-bottom: 0;
            }

            &:hover {
                .lib-css(padding, @review-widget-inner-spacing);
                .lib-css(margin-left, -@review-widget-inner-spacing);
                .lib-css(margin-right, -@review-widget-inner-spacing);
                background-color: @review-widget-luxury-highlight;
                border-radius: 8px;
                border-bottom-color: transparent;
            }
        }

        .review-header {
            .lib-css(margin-bottom, @review-widget-inner-spacing);
            display: flex;
            justify-content: space-between;
            align-items: flex-start;
            gap: @review-widget-inner-spacing;

            .rating-summary {
                flex: 0 0 auto;
            }

            .review-meta {
                flex: 1 1 auto;
                text-align: right;
                justify-content: flex-end;
            }
        }

        .review-title {
            .lib-css(margin-bottom, 16px);
        }

        .review-body {
            .lib-css(margin, @review-widget-inner-spacing 0);

            p {
                .luxury-typography-body();
                margin: 0;
            }
        }
    }

    //
    // Rating Stars - Premium Style
    // ___________________________________________

    .rating-result {
        position: relative;
        height: 20px;

        // Custom star colors for luxury feel
        &:before,
        > span {
            color: #d4af37; // Luxury gold
        }

        > span {
            > span {
                .lib-visually-hidden();
            }
        }
    }

    //
    // Loading States & Empty States
    // ___________________________________________

    .widget-reviews-list {
        &[data-loading="true"] {
            opacity: 0.6;
            pointer-events: none;

            &:after {
                content: '';
                position: absolute;
                top: 50%;
                left: 50%;
                width: 40px;
                height: 40px;
                border: 2px solid @review-widget-luxury-border;
                border-top-color: @review-widget-luxury-accent;
                border-radius: 50%;
                animation: luxury-spinner 800ms linear infinite;
            }
        }
    }

    @keyframes luxury-spinner {
        to {
            transform: rotate(360deg);
        }
    }
}

//
//  Responsive - Mobile First Approach
//  ----------------------------------------------

.media-width(@extremum, @break) when (@extremum = 'max') and (@break = @screen__s) {

    .widget-reviews-list {
        .lib-css(padding, 16px);
        border-radius: 12px;

        .block-title {
            flex-direction: column;
            gap: 16px;
            .lib-css(margin-bottom, 24px);

            .title {
                font-size: 22px;
            }

            .title-badge {
                width: 100%;
            }
        }
    }

    .widget-reviews-carousel {
        .review-item {
            .lib-css(padding, 20px);
        }
    }

    .widget-reviews-grid {
        .reviews-grid {
            grid-template-columns: 1fr;
            gap: 20px;
        }

        .review-card-content {
            .lib-css(padding, 20px);
        }
    }

    .widget-badge-rating {
        &.widget-badge-inline {
            display: flex;
            flex-direction: column;
            align-items: flex-start;
            border-radius: 12px;
            padding: 16px;

            .rating-summary,
            .reviews-actions {
                width: 100%;
            }
        }
    }
}

.media-width(@extremum, @break) when (@extremum = 'max') and (@break = @screen__m) {

    .widget-reviews-list {
        .review-actions {
            .action {
                width: 100%;
                display: block;
                text-align: center;
            }
        }
    }

    .widget-reviews-vertical {
        .review-header {
            flex-direction: column;
            align-items: flex-start;

            .review-meta {
                text-align: left;
                justify-content: flex-start;
            }
        }
    }
}

//
//  Tablet Optimizations
//  ----------------------------------------------

.media-width(@extremum, @break) when (@extremum = 'max') and (@break = @screen__l) {

    .widget-reviews-grid {
        .reviews-grid {
            grid-template-columns: repeat(auto-fill, minmax(280px, 1fr));
            gap: 24px;
        }
    }
}

//
//  Large Screens - Enhanced Experience
//  ----------------------------------------------

.media-width(@extremum, @break) when (@extremum = 'min') and (@break = @screen__xl) {

    .widget-reviews-list {
        .lib-css(padding, @review-widget-luxury-spacing);
        border-radius: 20px;

        .block-title {
            .lib-css(margin-bottom, @review-widget-luxury-spacing);

            .title {
                font-size: 32px;
            }
        }
    }

    .widget-reviews-grid {
        .reviews-grid {
            grid-template-columns: repeat(auto-fill, minmax(360px, 1fr));
            gap: @review-widget-luxury-spacing;
        }
    }
}

//
//  Print Styles
//  ----------------------------------------------

@media print {
    .widget-reviews-list {
        background: transparent;
        box-shadow: none;

        .review-actions,
        .rating-result:before {
            display: none;
        }

        .review-item,
        .review-card {
            box-shadow: none;
            border: 1px solid #000;
            page-break-inside: avoid;
        }
    }
}

//
//  Accessibility Enhancements
//  ----------------------------------------------

@media (prefers-reduced-motion: reduce) {
    .widget-reviews-list,
    .review-card,
    .review-item,
    .action {
        transition: none;
        animation: none;
    }
}